import os
import base64
import subprocess

folder_path = f'modules/translation'

file_data = [
    ('data_models.py', 'aW1wb3J0IHRvcmNoCmZyb20gcHlkYW50aWMgaW1wb3J0IEJhc2VNb2RlbApmcm9tIHR5cGluZyBpbXBvcnQgVW5pb24sIE9wdGlvbmFsLCBBbnkKCmZyb20gZGF0YV9tb2RlbHMgaW1wb3J0IEJhc2VNaW5lciwgQmFzZU1vZHVsZSwgTW9kdWxlQ29uZmlnLCBNaW5lclJlcXVlc3QsIGFwcCwgTWluZXJDb25maWcsIFNzNThLZXkKCgpUQVNLX1NUUklOR1MgPSB7CiAgICAic3BlZWNoMnRleHQiOiAiczJ0dCIsCiAgICAic3BlZWNoMnNwZWVjaCI6ICJzMnN0IiwKICAgICJhdXRvX3NwZWVjaF9yZWNvZ25pdGlvbiI6ICJhc3IiLAogICAgInRleHQyc3BlZWNoIjogInQyc3QiLAogICAgInRleHQydGV4dCI6ICJ0MnR0IiwKfQoKVEFSR0VUX0xBTkdVQUdFUyA9IHsKICAgICJFbmdsaXNoIjogImVuZyIsCiAgICAiQWZyaWthYW5zIjogImFmciIsCiAgICAiQW1oYXJpYyI6ICJhbWgiLAogICAgIk1vZGVybiBTdGFuZGFyZCBBcmFiaWMiOiAiYXJiIiwKICAgICJNb3JvY2NhbiBBcmFiaWMiOiAiYXJ5IiwKICAgICJFZ3lwdGlhbiBBcmFiaWMiOiAiYXJ6IiwKICAgICJBc3NhbWVzZSI6ICJhc20iLAogICAgIkFzdHVyaWFuIjogImFzdCIsCiAgICAiTm9ydGggQXplcmJhaWphbmkiOiAiYXpqIiwKICAgICJCZWxhcnVzaWFuIjogImJlbCIsCiAgICAiQmVuZ2FsaSI6ICJiZW4iLAogICAgIkJvc25pYW4iOiAiYm9zIiwKICAgICJCdWxnYXJpYW4iOiAiYnVsIiwKICAgICJDYXRhbGFuIjogImNhdCIsCiAgICAiQ2VidWFubyI6ICJjZWIiLAogICAgIkN6ZWNoIjogImNlcyIsCiAgICAiQ2VudHJhbCI6ICJja2IiLAogICAgIk1hbmRhcmluIENoaW5lc2UiOiAiY21uIiwKICAgICJNYW5kYXJpbiBDaGluZXNlIEhhbnQiOiAiY21uX0hhbnQiLAogICAgIldlbHNoIjogImN5bSIsCiAgICAiRGFuaXNoIjogImRhbiIsCiAgICAiR2VybWFuIjogImRldSIsCiAgICAiRXN0b25pYW4iOiAiZXN0IiwKICAgICJCYXNxdWUiOiAiZXVzIiwKICAgICJGaW5uaXNoIjogImZpbiIsCiAgICAiRnJlbmNoIjogImZyYSIsCiAgICAiTmlnZXJpYW4gRnVsZnVsZGUiOiAiZnV2IiwKICAgICJXZXN0IENlbnRyYWwgT3JvbW8iOiAiZ2F6IiwKICAgICJJcmlzaCI6ICJnbGUiLAogICAgIkdhbGljaWFuIjogImdsZyIsCiAgICAiR3VqYXJhdGkiOiAiZ3VqIiwKICAgICJIZWJyZXciOiAiaGViIiwKICAgICJIaW5kaSI6ICJoaW4iLAogICAgIkNyb2F0aWFuIjogImhydiIsCiAgICAiSHVuZ2FyaWFuIjogImh1biIsCiAgICAiQXJtZW5pYW4iOiAiaHllIiwKICAgICJJZ2JvIjogImlibyIsCiAgICAiSW5kb25lc2lhbiI6ICJpbmQiLAogICAgIkljZWxhbmRpYyI6ICJpc2wiLAogICAgIkl0YWxpYW4iOiAiaXRhIiwKICAgICJKYXZhbmVzZSI6ICJqYXYiLAogICAgIkphcGFuZXNlIjogImpwbiIsCiAgICAiS2FtYmEiOiAia2FtIiwKICAgICJLYW5uYWRhIjogImthbiIsCiAgICAiR2VvcmdpYW4iOiAia2F0IiwKICAgICJLYXpha2giOiAia2F6IiwKICAgICJLYWJ1dmVyZGlhbnUiOiAia2VhIiwKICAgICJIYWxoIE1vbmdvbGlhbiI6ICJraGsiLAogICAgIktobWVyIjogImtobSIsCiAgICAiS3lyZ3l6IjogImtpciIsCiAgICAiS29yZWFuIjogImtvciIsCiAgICAiTGFvIjogImxhbyIsCiAgICAiTGl0aHVhbmlhbiI6ICJsaXQiLAogICAgIkx1eGVtYm91cmdpc2giOiAibHR6IiwKICAgICJHYW5kYSI6ICJsdWciLAogICAgIkx1byI6ICJsdW8iLAogICAgIlN0YW5kYXJkIExhdHZpYW4iOiAibHZzIiwKICAgICJNYWl0aGlsaSI6ICJtYWkiLAogICAgIk1hbGF5YWxhbSI6ICJtYWwiLAogICAgIk1hcmF0aGkiOiAibWFyIiwKICAgICJNYWNlZG9uaWFuIjogIm1rZCIsCiAgICAiTWFsdGVzZSI6ICJtbHQiLAogICAgIk1laXRlaSI6ICJtbmkiLAogICAgIkJ1cm1lc2UiOiAibXlhIiwKICAgICJEdXRjaCI6ICJubGQiLAogICAgIk5vcndlZ2lhbiBOeW5vcnNrIjogIm5ubyIsCiAgICAiTm9yd2VnaWFuIEJva23DpWwiOiAibm9iIiwKICAgICJOZXBhbGkiOiAibnBpIiwKICAgICJOeWFuamEiOiAibnlhIiwKICAgICJPY2NpdGFuIjogIm9jaSIsCiAgICAiT2RpYSI6ICJvcnkiLAogICAgIlB1bmphYmkiOiAicGFuIiwKICAgICJTb3V0aGVybiBQYXNodG8iOiAicGJ0IiwKICAgICJXZXN0ZXJuIFBlcnNpYW4iOiAicGVzIiwKICAgICJQb2xpc2giOiAicG9sIiwKICAgICJQb3J0dWd1ZXNlIjogInBvciIsCiAgICAiUm9tYW5pYW4iOiAicm9uIiwKICAgICJSdXNzaWFuIjogInJ1cyIsCiAgICAiU2xvdmFrIjogInNsayIsCiAgICAiU2xvdmVuaWFuIjogInNsdiIsCiAgICAiU2hvbmEiOiAic25hIiwKICAgICJTaW5kaGkiOiAic25kIiwKICAgICJTb21hbGkiOiAic29tIiwKICAgICJTcGFuaXNoIjogInNwYSIsCiAgICAiU2VyYmlhbiI6ICJzcnAiLAogICAgIlN3ZWRpc2giOiAic3dlIiwKICAgICJTd2FoaWxpIjogInN3aCIsCiAgICAiVGFtaWwiOiAidGFtIiwKICAgICJUZWx1Z3UiOiAidGVsIiwKICAgICJUYWppayI6ICJ0Z2siLAogICAgIlRhZ2Fsb2ciOiAidGdsIiwKICAgICJUaGFpIjogInRoYSIsCiAgICAiVHVya2lzaCI6ICJ0dXIiLAogICAgIlVrcmFpbmlhbiI6ICJ1a3IiLAogICAgIlVyZHUiOiAidXJkIiwKICAgICJOb3J0aGVybiBVemJlayI6ICJ1em4iLAogICAgIlZpZXRuYW1lc2UiOiAidmllIiwKICAgICJYaG9zYSI6ICJ4aG8iLAogICAgIllvcnViYSI6ICJ5b3IiLAogICAgIkNhbnRvbmVzZSI6ICJ5dWUiLAogICAgIkNvbGxvcXVpYWwgTWFsYXkiOiAiemxtIiwKICAgICJTdGFuZGFyZCBNYWxheSI6ICJ6c20iLAogICAgIlp1bHUiOiAienVsIiwKfQoKCmNsYXNzIFRyYW5zbGF0aW9uQ29uZmlnKEJhc2VNb2RlbCk6CiAgICBtb2RlbF9uYW1lX29yX2NhcmQ6IFVuaW9uW3N0ciwgQW55XSA9ICJmYWNlYm9vay9zZWFtbGVzcy1NNFQtVjItbGFyZ2UiCiAgICB2b2NvZGVyX25hbWU6IHN0ciA9ICgKICAgICAgICAidm9jb2Rlcl92MiIKICAgICAgICBpZiBtb2RlbF9uYW1lX29yX2NhcmQgPT0gImZhY2Vib29rL3NlYW1sZXNzLU00VC1WMi1sYXJnZSIKICAgICAgICBlbHNlICJ2b2NvZGVyXzM2bGFuZ3MiCiAgICApCiAgICBkZXZpY2U6IEFueSA9IHRvcmNoLmRldmljZShkZXZpY2U9ImN1ZGE6MCIpCiAgICB0ZXh0X3Rva2VuaXplcjogc3RyID0gbW9kZWxfbmFtZV9vcl9jYXJkCiAgICBhcHBseV9taW50b3g6IGJvb2wgPSAoVHJ1ZSwpCiAgICBkdHlwZTogQW55ID0gKHRvcmNoLmZsb2F0MTYsKQogICAgaW5wdXRfbW9kYWxpdHk6IE9wdGlvbmFsW0FueV0gPSAoTm9uZSwpCiAgICBvdXRwdXRfbW9kYWxpdHk6IE9wdGlvbmFsW0FueV0gPSBOb25lCgoKY2xhc3MgVHJhbnNsYXRpb25EYXRhKEJhc2VNb2RlbCk6CiAgICBpbnB1dDogc3RyCiAgICB0YXNrX3N0cmluZzogc3RyCiAgICBzb3VyY2VfbGFuZ3VhZ2U6IE9wdGlvbmFsW3N0cl0gPSBOb25lCiAgICB0YXJnZXRfbGFuZ3VhZ2U6IHN0cgogICAgCiAgICAKY2xhc3MgVHJhbnNsYXRpb25SZXF1ZXN0KE1pbmVyUmVxdWVzdCk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgZGF0YTogVHJhbnNsYXRpb25EYXRhKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCkKICAgICAgICBzZWxmLmRhdGEgPSBkYXRhCgogICAKX19hbGxfXyA9IFsKICAgICJUcmFuc2xhdGlvbkNvbmZpZyIsCiAgICAiVHJhbnNsYXRpb25EYXRhIiwKICAgICJUcmFuc2xhdGlvblJlcXVlc3QiLAogICAgIlRBUkdFVF9MQU5HVUFHRVMiLAogICAgIlRBU0tfU1RSSU5HUyIsCiAgICAiTWluZXJDb25maWciLAogICAgIk1vZHVsZUNvbmZpZyIsCiAgICAiQmFzZU1pbmVyIiwKICAgICJCYXNlTW9kdWxlIiwKICAgICJhcHAiLAogICAgIlNzNThLZXkiCl0='),
    ('__init__.py', ''),
    ('translation_module.py', 'aW1wb3J0IG9zCmltcG9ydCBpbwppbXBvcnQgYmFzZTY0CmZyb20gdHlwaW5nIGltcG9ydCBVbmlvbiwgT3B0aW9uYWwKZnJvbSBmYXN0YXBpIGltcG9ydCBIVFRQRXhjZXB0aW9uCmZyb20gZG90ZW52IGltcG9ydCBsb2FkX2RvdGVudgpmcm9tIGxvZ3VydSBpbXBvcnQgbG9nZ2VyCgpmcm9tIC5kYXRhX21vZGVscyBpbXBvcnQgVHJhbnNsYXRpb25SZXF1ZXN0LCBNaW5lckNvbmZpZywgTW9kdWxlQ29uZmlnLCBCYXNlTWluZXIsIFRyYW5zbGF0aW9uQ29uZmlnCmZyb20gLnRyYW5zbGF0aW9uIGltcG9ydCBUcmFuc2xhdGlvbgoKbG9hZF9kb3RlbnYoKQoKCm1vZHVsZV9zZXR0aW5ncyA9IE1vZHVsZUNvbmZpZygKICAgIG1vZHVsZV9wYXRoPW9zLmdldGVudigiTU9EVUxFX1BBVEgiKSwKICAgIG1vZHVsZV9uYW1lPW9zLmdldGVudigiTU9EVUxFX05BTUUiKSwKICAgIG1vZHVsZV9lbmRwb2ludD1vcy5nZXRlbnYoIk1PRFVMRV9FTkRQT0lOVCIpLAogICAgbW9kdWxlX3VybD0iaHR0cHM6Ly9odHRwOi8vbG9jYWxob3N0OjQyNjcvIgopCgptaW5lcl9zZXR0aW5ncyA9IE1pbmVyQ29uZmlnKAogICAgbWluZXJfbmFtZT1vcy5nZXRlbnYoIk1JTkVSX05BTUUiKSwKICAgIG1pbmVyX2tleXBhdGg9b3MuZ2V0ZW52KCJLRVlQQVRIX05BTUUiKSwKICAgIG1pbmVyX2hvc3Q9b3MuZ2V0ZW52KCJNSU5FUl9IT1NUIiksCiAgICBleHRlcm5hbF9hZGRyZXNzPW9zLmdldGVudigiRVhURVJOQUxfQUREUkVTUyIpLAogICAgbWluZXJfcG9ydD1vcy5nZXRlbnYoIk1JTkVSX1BPUlQiKSwKICAgIHN0YWtlPW9zLmdldGVudigiU1RBS0UiKSwKICAgIG5ldHVpZD1vcy5nZXRlbnYoIk5FVFVJRCIpLAogICAgZnVuZGluZ19rZXk9b3MuZ2V0ZW52KCJGVU5ESU5HX0tFWSIpLAogICAgZnVuZGluZ19tb2RpZmllcj1vcy5nZXRlbnYoIk1PRElGSUVSIiksCiAgICBtb2R1bGVfbmFtZT1vcy5nZXRlbnYoIk1PRFVMRV9OQU1FIikKKQp0cmFuc2xhdG9yID0gVHJhbnNsYXRpb24oVHJhbnNsYXRpb25Db25maWcoKSkKCgpjbGFzcyBUcmFuc2xhdGlvbk1pbmVyKEJhc2VNaW5lcik6CiAgICAKICAgIGRlZiBfX2luaXRfXygKICAgICAgICBzZWxmLAogICAgICAgIG1pbmVyX2NvbmZpZzogTWluZXJDb25maWcsCiAgICAgICAgbW9kdWxlX2NvbmZpZzogTW9kdWxlQ29uZmlnCiAgICApOgogICAgICAgICIiIgogICAgICAgIEluaXRpYWxpemVzIHRoZSBUcmFuc2xhdGlvbk1pbmVyIGNsYXNzIHdpdGggb3B0aW9uYWwgcm91dGUsIGlucGF0aCwgYW5kIG91dHBhdGggcGFyYW1ldGVycy4KICAgICAgICAKICAgICAgICBQYXJhbWV0ZXJzOgogICAgICAgICAgICBtaW5lcl9jb25maWcgKE1pbmVyQ29uZmlnKTogVGhlIHJvdXRlIGZvciB0aGUgdHJhbnNsYXRpb24uCiAgICAgICAgICAgIG1vZHVsZV9jb25maWcgKE1vZHVsZUNvbmZpZyk6IFRoZSBpbnB1dCBwYXRoIGZvciB0cmFuc2xhdGlvbi4KICAgICAgICAiIiIKICAgICAgICBzdXBlcigpLl9faW5pdF9fKG1pbmVyX2NvbmZpZywgbW9kdWxlX3NldHRpbmdzKSAgICAgICAgCiAgICAgICAgb3MubWFrZWRpcnMobW9kdWxlX2NvbmZpZy5tb2R1bGVfcGF0aCwgZXhpc3Rfb2s9VHJ1ZSkKICAgICAgICBvcy5tYWtlZGlycyhmInttb2R1bGVfY29uZmlnLm1vZHVsZV9wYXRofS9pbiIsIGV4aXN0X29rPVRydWUpCiAgICAgICAgb3MubWFrZWRpcnMoZiJ7bW9kdWxlX2NvbmZpZy5tb2R1bGVfcGF0aH0vb3V0IiwgZXhpc3Rfb2s9VHJ1ZSkKICAgIAogICAgZGVmIHByb2Nlc3Moc2VsZiwgbWluZXJfcmVxdWVzdDogVHJhbnNsYXRpb25SZXF1ZXN0KSAtPiBVbmlvbltzdHIsIGJ5dGVzXToKICAgICAgICAiIiIKICAgICAgICBQcm9jZXNzZXMgdGhlIGdpdmVuIGBUcmFuc2xhdGlvblJlcXVlc3RgIG9iamVjdCBhbmQgcmV0dXJucyB0aGUgdHJhbnNsYXRpb24gcmVzdWx0LgoKICAgICAgICBQYXJhbWV0ZXJzOgogICAgICAgICAgICBtaW5lcl9yZXF1ZXN0IChUcmFuc2xhdGlvblJlcXVlc3QpOiBUaGUgcmVxdWVzdCBvYmplY3QgY29udGFpbmluZyB0aGUgaW5wdXQgZGF0YSwgdGFzayBzdHJpbmcsIHNvdXJjZSBsYW5ndWFnZSwgYW5kIHRhcmdldCBsYW5ndWFnZS4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgVW5pb25bc3RyLCBieXRlc106IFRoZSB0cmFuc2xhdGlvbiByZXN1bHQuCgogICAgICAgIFJhaXNlczoKICAgICAgICAgICAgSFRUUEV4Y2VwdGlvbjogSWYgYW4gZXJyb3Igb2NjdXJzIGR1cmluZyB0aGUgdHJhbnNsYXRpb24gcHJvY2Vzcy4KCiAgICAgICAgIiIiCiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRvci5wcm9jZXNzKG1pbmVyX3JlcXVlc3QpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICBsb2dnZXIuZXJyb3IoZiJFcnJvciBwcm9jZXNzaW5nIHRyYW5zbGF0aW9uOiB7ZX0iKQogICAgICAgICAgICByYWlzZSBIVFRQRXhjZXB0aW9uKHN0YXR1c19jb2RlPTUwMCwgZGV0YWlsPWYiRXJyb3IgcHJvY2Vzc2luZyB0cmFuc2xhdGlvbjoge2V9IikgZnJvbSBlCiAgICAKICAgICAgICAKbWluZXIgPSBUcmFuc2xhdGlvbk1pbmVyKG1vZHVsZV9jb25maWc9bW9kdWxlX3NldHRpbmdzLCBtaW5lcl9jb25maWc9bWluZXJfc2V0dGluZ3MpCgptaW5lci5hZGRfcm91dGUobW9kdWxlX3NldHRpbmdzLm1vZHVsZV9uYW1lKQoKbWluZXIucnVuX3NlcnZlcihtaW5lcl9zZXR0aW5ncy5taW5lcl9ob3N0LCBtaW5lcl9zZXR0aW5ncy5taW5lcl9wb3J0KQo='),
    ('translation.py', 'aW1wb3J0IGlvCmltcG9ydCBzY2lweQppbXBvcnQgdG9yY2gKaW1wb3J0IGJhc2U2NAppbXBvcnQgdG9yY2hhdWRpbwoKZnJvbSBsb2d1cnUgaW1wb3J0IGxvZ2dlcgpmcm9tIHR5cGluZyBpbXBvcnQgT3B0aW9uYWwKZnJvbSBmdW5jdG9vbHMgaW1wb3J0IGxydV9jYWNoZQpmcm9tIHR5cGluZyBpbXBvcnQgRGljdCwgVHVwbGUsIFVuaW9uCmZyb20gdHJhbnNmb3JtZXJzIGltcG9ydCBBdXRvUHJvY2Vzc29yLCBTZWFtbGVzc000VHYyTW9kZWwKZnJvbSBweWR1YiBpbXBvcnQgQXVkaW9TZWdtZW50Cgpmcm9tIC5kYXRhX21vZGVscyBpbXBvcnQgVEFSR0VUX0xBTkdVQUdFUywgVEFTS19TVFJJTkdTLCBUcmFuc2xhdGlvblJlcXVlc3QsIFRyYW5zbGF0aW9uQ29uZmlnCgp0cmFuc2xhdGlvbl9jb25maWcgPSBUcmFuc2xhdGlvbkNvbmZpZygpCgpjbGFzcyBUcmFuc2xhdGlvbjoKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICAiIiIKICAgICAgICBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgVHJhbnNsYXRpb24gY2xhc3MuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIHRyYW5zbGF0aW9uX2NvbmZpZyAoVHJhbnNsYXRpb25Db25maWcpOiBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIHRyYW5zbGF0aW9uLgoKICAgICAgICBJbml0aWFsaXplcyB0aGUgZm9sbG93aW5nIGluc3RhbmNlIHZhcmlhYmxlczoKICAgICAgICAgICAgLSB0cmFuc2xhdGlvbl9jb25maWcgKFRyYW5zbGF0aW9uQ29uZmlnKTogVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGZvciB0cmFuc2xhdGlvbi4KICAgICAgICAgICAgLSBwcm9jZXNzb3IgKEF1dG9Qcm9jZXNzb3IpOiBUaGUgcHJvY2Vzc29yIG9iamVjdCBmb3IgcHJlcHJvY2Vzc2luZyBpbnB1dCBkYXRhLgogICAgICAgICAgICAtIG1vZGVsIChTZWFtbGVzc000VHYyTW9kZWwpOiBUaGUgbW9kZWwgb2JqZWN0IGZvciB0cmFuc2xhdGlvbi4KICAgICAgICAgICAgLSBkZXZpY2UgKHRvcmNoLmRldmljZSk6IFRoZSBkZXZpY2UgdG8gcnVuIHRoZSBtb2RlbCBvbiAoQ1VEQSBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBDUFUpLgogICAgICAgICAgICAtIHRhcmdldF9sYW5ndWFnZXMgKERpY3Rbc3RyLCBzdHJdKTogQSBkaWN0aW9uYXJ5IG1hcHBpbmcgdGFyZ2V0IGxhbmd1YWdlcyB0byB0aGVpciBjb2Rlcy4KICAgICAgICAgICAgLSB0YXNrX3N0cmluZ3MgKERpY3Rbc3RyLCBzdHJdKTogQSBkaWN0aW9uYXJ5IG1hcHBpbmcgdGFzayBzdHJpbmdzIHRvIHRoZWlyIGNvZGVzLgogICAgICAgICAgICAtIGRhdGFfaW5wdXQgKE5vbmUpOiBUaGUgaW5wdXQgZGF0YSBmb3IgdHJhbnNsYXRpb24uCiAgICAgICAgICAgIC0gdGFza19zdHJpbmcgKE5vbmUpOiBUaGUgdGFzayBzdHJpbmcgZm9yIHRyYW5zbGF0aW9uLgogICAgICAgICAgICAtIHNvdXJjZV9sYW5ndWFnZSAoTm9uZSk6IFRoZSBzb3VyY2UgbGFuZ3VhZ2UgZm9yIHRyYW5zbGF0aW9uLgogICAgICAgICAgICAtIHRhcmdldF9sYW5ndWFnZSAoTm9uZSk6IFRoZSB0YXJnZXQgbGFuZ3VhZ2UgZm9yIHRyYW5zbGF0aW9uLgogICAgICAgICIiIgogICAgICAgIHNlbGYudHJhbnNsYXRpb25fY29uZmlnID0gdHJhbnNsYXRpb25fY29uZmlnCiAgICAgICAgc2VsZi5wcm9jZXNzb3IgPSBBdXRvUHJvY2Vzc29yLmZyb21fcHJldHJhaW5lZCh0cmFuc2xhdGlvbl9jb25maWcubW9kZWxfbmFtZV9vcl9jYXJkKQogICAgICAgIHNlbGYubW9kZWwgPSBTZWFtbGVzc000VHYyTW9kZWwuZnJvbV9wcmV0cmFpbmVkKHRyYW5zbGF0aW9uX2NvbmZpZy5tb2RlbF9uYW1lX29yX2NhcmQpCiAgICAgICAgc2VsZi5kZXZpY2UgPSB0b3JjaC5kZXZpY2UoImN1ZGEiIGlmIHRvcmNoLmN1ZGEuaXNfYXZhaWxhYmxlKCkgZWxzZSAiY3B1IikKICAgICAgICBzZWxmLm1vZGVsLnRvKHNlbGYuZGV2aWNlKQogICAgICAgIHNlbGYudGFyZ2V0X2xhbmd1YWdlczogRGljdFtzdHIsIHN0cl0gPSBUQVJHRVRfTEFOR1VBR0VTCiAgICAgICAgc2VsZi50YXNrX3N0cmluZ3M6IERpY3Rbc3RyLCBzdHJdID0gVEFTS19TVFJJTkdTCiAgICAgICAgc2VsZi5kYXRhX2lucHV0ID0gTm9uZQogICAgICAgIHNlbGYudGFza19zdHJpbmcgPSBOb25lCiAgICAgICAgc2VsZi5zb3VyY2VfbGFuZ3VhZ2UgPSBOb25lCiAgICAgICAgc2VsZi50YXJnZXRfbGFuZ3VhZ2UgPSBOb25lCgogICAgQGxydV9jYWNoZShtYXhzaXplPTEyOCkKICAgIGRlZiBfZ2V0X2xhbmd1YWdlKHNlbGYsIGxhbmd1YWdlOiBzdHIpIC0+IHN0cjoKICAgICAgICAiIiIKICAgICAgICBGdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgbGFuZ3VhZ2UgZnJvbSB0aGUgdGFyZ2V0X2xhbmd1YWdlcyBkaWN0aW9uYXJ5LgogICAgICAgIAogICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgICAgIHNlbGY6IFRoZSBUcmFuc2xhdGlvbiBvYmplY3QuCiAgICAgICAgICAgIGxhbmd1YWdlOiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGxhbmd1YWdlIHRvIHJldHJpZXZlLgogICAgICAgIAogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgbGFuZ3VhZ2UgZnJvbSB0aGUgdGFyZ2V0X2xhbmd1YWdlcyBkaWN0aW9uYXJ5LgogICAgICAgICIiIgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHNlbGYudGFyZ2V0X2xhbmd1YWdlc1tsYW5ndWFnZV0KICAgICAgICBleGNlcHQgS2V5RXJyb3IgYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiSW52YWxpZCBsYW5ndWFnZToge2xhbmd1YWdlfSB7ZX0iKQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCBsYW5ndWFnZToge2xhbmd1YWdlfSIpIGZyb20gZQoKICAgIGRlZiBwcm9jZXNzKHNlbGYsIG1pbmVyX3JlcXVlc3Q6IFRyYW5zbGF0aW9uUmVxdWVzdCkgLT4gVHVwbGVbVW5pb25bc3RyLCBOb25lXSwgVW5pb25bdG9yY2guVGVuc29yLCBOb25lXV06CiAgICAgICAgIiIiCiAgICAgICAgQSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIFRyYW5zbGF0aW9uUmVxdWVzdCBvYmplY3QgdG8gcGVyZm9ybSB0cmFuc2xhdGlvbiB0YXNrcy4gCiAgICAgICAgUmV0cmlldmVzIGlucHV0IGRhdGEsIHRhc2sgc3RyaW5nLCBzb3VyY2UgYW5kIHRhcmdldCBsYW5ndWFnZXMsIHByZXByb2Nlc3NlcyB0aGUgaW5wdXQgZGF0YSwgCiAgICAgICAgcHJlZGljdHMgdGhlIG91dHB1dCBiYXNlZCBvbiB0aGUgaW5wdXQgYW5kIGxhbmd1YWdlcywgYW5kIHByb2Nlc3NlcyB0aGUgZmluYWwgb3V0cHV0LiAKICAgICAgICBSYWlzZXMgVmFsdWVFcnJvcnMgZm9yIGludmFsaWQgdGFzayBzdHJpbmdzIGFuZCBtaXNzaW5nIGlucHV0IGRhdGEuCgogICAgICAgIFBhcmFtZXRlcnM6CiAgICAgICAgICAgIHNlbGY6IFRoZSBUcmFuc2xhdGlvbiBvYmplY3QuCiAgICAgICAgICAgIG1pbmVyX3JlcXVlc3QgKFRyYW5zbGF0aW9uUmVxdWVzdCk6IFRoZSByZXF1ZXN0IG9iamVjdCBjb250YWluaW5nIGlucHV0IGRhdGEsIHRhc2sgc3RyaW5nLCAKICAgICAgICAgICAgICAgIHNvdXJjZSBsYW5ndWFnZSwgYW5kIHRhcmdldCBsYW5ndWFnZS4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgVHVwbGVbVW5pb25bc3RyLCBOb25lXSwgVW5pb25bdG9yY2guVGVuc29yLCBOb25lXV06IAogICAgICAgICAgICAgICAgQSB0dXBsZSBjb250YWluaW5nIGVpdGhlciBhIHN0cmluZyBvciBOb25lLCBhbmQgZWl0aGVyIGEgdG9yY2guVGVuc29yIG9yIE5vbmUsIAogICAgICAgICAgICAgICAgcmVwcmVzZW50aW5nIHRoZSBwcm9jZXNzZWQgb3V0cHV0LgogICAgICAgICIiIgogICAgICAgIGlmICJpbnB1dCIgaW4gbWluZXJfcmVxdWVzdC5kYXRhOgogICAgICAgICAgICBzZWxmLmRhdGFfaW5wdXQgPSBtaW5lcl9yZXF1ZXN0LmRhdGFbImlucHV0Il0KICAgICAgICBpZiAidGFza19zdHJpbmciIGluIG1pbmVyX3JlcXVlc3QuZGF0YToKICAgICAgICAgICAgc2VsZi50YXNrX3N0cmluZyA9IG1pbmVyX3JlcXVlc3QuZGF0YVsidGFza19zdHJpbmciXQogICAgICAgIGlmICJzb3VyY2VfbGFuZ3VhZ2UiIGluIG1pbmVyX3JlcXVlc3QuZGF0YToKICAgICAgICAgICAgc2VsZi5zb3VyY2VfbGFuZ3VhZ2UgPSBtaW5lcl9yZXF1ZXN0LmRhdGFbInNvdXJjZV9sYW5ndWFnZSJdLnRpdGxlKCkKICAgICAgICBpZiAidGFyZ2V0X2xhbmd1YWdlIiBpbiBtaW5lcl9yZXF1ZXN0LmRhdGE6CiAgICAgICAgICAgIHNlbGYudGFyZ2V0X2xhbmd1YWdlID0gbWluZXJfcmVxdWVzdC5kYXRhWyJ0YXJnZXRfbGFuZ3VhZ2UiXS50aXRsZSgpCgogICAgICAgIGlmIG5vdCBzZWxmLnRhc2tfc3RyaW5nOgogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiSW52YWxpZCB0YXNrIHN0cmluZzoge21pbmVyX3JlcXVlc3QuZGF0YX0iKQoKICAgICAgICBpZiBzZWxmLmRhdGFfaW5wdXQgaXMgTm9uZToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiTm8gaW5wdXQgcHJvdmlkZWQiKQogICAgICAgIGlmIHNlbGYudGFza19zdHJpbmcuc3RhcnRzd2l0aCgic3BlZWNoIik6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBzZWxmLmRhdGFfaW5wdXQgPSBzZWxmLl9wcmVwcm9jZXNzKHNlbGYuZGF0YV9pbnB1dCkKICAgICAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJlcHJvY2Vzc2luZyBpbnB1dDoge2V9IikKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJFcnJvciBwcmVwcm9jZXNzaW5nIGlucHV0OiB7ZX0iKSBmcm9tIGUKICAgICAgICAKICAgICAgICBvdXRwdXQgPSBOb25lCiAgICAgICAgd2l0aCB0b3JjaC5ub19ncmFkKCk6CiAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuX3ByZWRpY3QoCiAgICAgICAgICAgICAgICBpbnB1dD1zZWxmLmRhdGFfaW5wdXQsCiAgICAgICAgICAgICAgICB0YXNrX3N0cj1zZWxmLnRhc2tfc3RyaW5nc1tzZWxmLnRhc2tfc3RyaW5nXSwKICAgICAgICAgICAgICAgIHNyY19sYW5nPXNlbGYudGFyZ2V0X2xhbmd1YWdlc1tzZWxmLnNvdXJjZV9sYW5ndWFnZV0sCiAgICAgICAgICAgICAgICB0Z3RfbGFuZz1zZWxmLnRhcmdldF9sYW5ndWFnZXNbc2VsZi50YXJnZXRfbGFuZ3VhZ2VdCiAgICAgICAgICAgICkKICAgICAgICAgICAgCiAgICAgICAgaWYgc2VsZi50YXNrX3N0cmluZy5lbmRzd2l0aCgic3BlZWNoIik6CiAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuX3Byb2Nlc3NfYXVkaW9fb3V0cHV0KG91dHB1dCkKICAgICAgICBlbHNlOgogICAgICAgICAgICBvdXRwdXQgPSBvdXRwdXQuZW5jb2RlKCJ1dGYtOCIpCgogICAgICAgIHJldHVybiBzZWxmLl9wcm9jZXNzX291dHB1dChvdXRwdXQpCiAgICAKICAgIGRlZiBfcHJlcHJvY2VzcyhzZWxmLCBpbnB1dF9kYXRhKToKICAgICAgICAiIiIKICAgICAgICBQcmVwcm9jZXNzZXMgdGhlIGlucHV0IGRhdGEgYnkgd3JpdGluZyBpdCB0byBhIGZpbGUgYW5kIHJldHVybmluZyB0aGUgZmlsZSBwYXRoLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBpbnB1dF9kYXRhIChzdHIpOiBUaGUgYmFzZTY0IGVuY29kZWQgYXVkaW8gZGF0YSB0byBiZSBwcmVwcm9jZXNzZWQuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIHN0cjogVGhlIGZpbGUgcGF0aCBvZiB0aGUgcHJlcHJvY2Vzc2VkIGF1ZGlvIGZpbGUuCgogICAgICAgIFJhaXNlczoKICAgICAgICAgICAgTm9uZQogICAgICAgICIiIgogICAgICAgIHdpdGggb3BlbigibW9kdWxlcy90cmFuc2xhdGlvbi9pbi9hdWRpb19yZXF1ZXN0LndhdiIsICJ3YiIpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoYmFzZTY0LmI2NGRlY29kZShpbnB1dF9kYXRhKSkKICAgICAgICByZXR1cm4gIm1vZHVsZXMvdHJhbnNsYXRpb24vaW4vYXVkaW9fcmVxdWVzdC53YXYiCiAgICAKICAgIGRlZiBfcHJvY2Vzc190ZXh0X2lucHV0cyhzZWxmLCBpbnB1dF9kYXRhOiBzdHIsIHNyY19sYW5nOiBzdHIpIC0+IERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdOgogICAgICAgICIiIgogICAgICAgIFByb2Nlc3NlcyB0ZXh0IGlucHV0cyBieSB1dGlsaXppbmcgdGhlIHByb2Nlc3NvciB0byBjb252ZXJ0IGlucHV0IGRhdGEgaW50byB0b3JjaCB0ZW5zb3JzLgoKICAgICAgICBQYXJhbWV0ZXJzOgogICAgICAgICAgICBzZWxmOiBUaGUgVHJhbnNsYXRpb24gb2JqZWN0LgogICAgICAgICAgICBpbnB1dF9kYXRhIChzdHIpOiBUaGUgaW5wdXQgdGV4dCBkYXRhIHRvIGJlIHByb2Nlc3NlZC4KICAgICAgICAgICAgc3JjX2xhbmcgKHN0cik6IFRoZSBzb3VyY2UgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IHRleHQuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdOiBBIGRpY3Rpb25hcnkgY29udGFpbmluZyB0b3JjaCB0ZW5zb3JzIGFzIHZhbHVlcyBmb3IgZGlmZmVyZW50IGtleXMuCiAgICAgICAgIiIiCiAgICAgICAgcmV0dXJuIHNlbGYucHJvY2Vzc29yKHRleHQ9aW5wdXRfZGF0YSwgc3JjX2xhbmc9c3JjX2xhbmcsIHJldHVybl90ZW5zb3JzPSJwdCIpCgogICAgZGVmIF9wcm9jZXNzX2F1ZGlvX2lucHV0KHNlbGYsIGlucHV0X2RhdGE6IHN0ciwgc3JjX2xhbmc6IHN0cikgLT4gRGljdFtzdHIsIHRvcmNoLlRlbnNvcl06CiAgICAgICAgIiIiCiAgICAgICAgUHJvY2Vzc2VzIHRoZSBhdWRpbyBpbnB1dCBkYXRhIGFuZCByZXR1cm5zIGEgZGljdGlvbmFyeSBvZiB0ZW5zb3JzLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBpbnB1dF9kYXRhIChzdHIpOiBUaGUgcGF0aCB0byB0aGUgYXVkaW8gZmlsZS4KICAgICAgICAgICAgc3JjX2xhbmcgKHN0cik6IFRoZSBzb3VyY2UgbGFuZ3VhZ2Ugb2YgdGhlIGF1ZGlvLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBEaWN0W3N0ciwgdG9yY2guVGVuc29yXTogQSBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgdGhlIHByb2Nlc3NlZCB0ZW5zb3JzLgogICAgICAgICIiIgogICAgICAgIHdhdmVmb3JtLCBzYW1wbGVfcmF0ZSA9IHRvcmNoYXVkaW8ubG9hZChpbnB1dF9kYXRhKQogICAgICAgIGlmIHNhbXBsZV9yYXRlICE9IDE2MDAwOgogICAgICAgICAgICB3YXZlZm9ybSA9IHRvcmNoYXVkaW8uZnVuY3Rpb25hbC5yZXNhbXBsZSh3YXZlZm9ybSwgc2FtcGxlX3JhdGUsIDE2MDAwKQogICAgICAgIHJldHVybiBzZWxmLnByb2Nlc3NvcihhdWRpb3M9d2F2ZWZvcm0uc3F1ZWV6ZSgpLCBzcmNfbGFuZz1zcmNfbGFuZywgc2FtcGxpbmdfcmF0ZT0xNjAwMCwgcmV0dXJuX3RlbnNvcnM9InB0IikKCiAgICBkZWYgX2dlbmVyYXRlX2F1ZGlvKHNlbGYsIGlucHV0X2RhdGE6IERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdLCB0Z3RfbGFuZzogc3RyKSAtPiB0b3JjaC5UZW5zb3I6CiAgICAgICAgIiIiCiAgICAgICAgR2VuZXJhdGUgYW4gYXVkaW8gdGVuc29yIGJhc2VkIG9uIHRoZSBpbnB1dCBkYXRhIGFuZCB0YXJnZXQgbGFuZ3VhZ2UuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIGlucHV0X2RhdGEgKERpY3Rbc3RyLCB0b3JjaC5UZW5zb3JdKTogQSBkaWN0aW9uYXJ5IGNvbnRhaW5pbmcgaW5wdXQgZGF0YSB0ZW5zb3JzLgogICAgICAgICAgICB0Z3RfbGFuZyAoc3RyKTogVGhlIHRhcmdldCBsYW5ndWFnZSBmb3IgdGhlIGdlbmVyYXRlZCBhdWRpby4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgdG9yY2guVGVuc29yOiBUaGUgZ2VuZXJhdGVkIGF1ZGlvIHRlbnNvci4KCiAgICAgICAgIiIiCiAgICAgICAgaW5wdXRfZGF0YSA9IHtrOiB2LnRvKHNlbGYuZGV2aWNlKSBmb3IgaywgdiBpbiBpbnB1dF9kYXRhLml0ZW1zKCl9CiAgICAgICAgcmV0dXJuIHNlbGYubW9kZWwuZ2VuZXJhdGUoKippbnB1dF9kYXRhLCB0Z3RfbGFuZz10Z3RfbGFuZylbMF0KCiAgICBkZWYgX2dlbmVyYXRlX3RleHQoc2VsZiwgaW5wdXRfZGF0YTogRGljdFtzdHIsIHRvcmNoLlRlbnNvcl0sIHRndF9sYW5nOiBzdHIpIC0+IHN0cjoKICAgICAgICAiIiIKICAgICAgICBHZW5lcmF0ZXMgdGV4dCBiYXNlZCBvbiB0aGUgaW5wdXQgZGF0YSBhbmQgdGFyZ2V0IGxhbmd1YWdlLgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBpbnB1dF9kYXRhIChEaWN0W3N0ciwgdG9yY2guVGVuc29yXSk6IEEgZGljdGlvbmFyeSBjb250YWluaW5nIGlucHV0IGRhdGEgdGVuc29ycy4KICAgICAgICAgICAgdGd0X2xhbmcgKHN0cik6IFRoZSB0YXJnZXQgbGFuZ3VhZ2UgZm9yIHRoZSBnZW5lcmF0ZWQgdGV4dC4KCiAgICAgICAgUmV0dXJuczoKICAgICAgICAgICAgc3RyOiBUaGUgZ2VuZXJhdGVkIHRleHQuCiAgICAgICAgIiIiCiAgICAgICAgaW5wdXRfZGF0YSA9IHtrOiB2LnRvKHNlbGYuZGV2aWNlKSBmb3IgaywgdiBpbiBpbnB1dF9kYXRhLml0ZW1zKCl9CiAgICAgICAgb3V0cHV0X3Rva2VucyA9IHNlbGYubW9kZWwuZ2VuZXJhdGUoKippbnB1dF9kYXRhLCB0Z3RfbGFuZz10Z3RfbGFuZywgZ2VuZXJhdGVfc3BlZWNoPUZhbHNlKQogICAgICAgIHJldHVybiBzZWxmLnByb2Nlc3Nvci5kZWNvZGUob3V0cHV0X3Rva2Vuc1swXS50b2xpc3QoKVswXSwgc2tpcF9zcGVjaWFsX3Rva2Vucz1UcnVlKQoKICAgIGRlZiBfcHJlZGljdChzZWxmLCAqKmt3YXJncykgLT4gVHVwbGVbVW5pb25bc3RyLCBOb25lXSwgVW5pb25bdG9yY2guVGVuc29yLCBOb25lXV06CiAgICAgICAgIiIiCiAgICAgICAgQSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBpbnB1dCBkYXRhIGZvciBwcmVkaWN0aW9uLiAKICAgICAgICBSZXRyaWV2ZXMgaW5wdXQgZGF0YSwgdGFzayBzdHJpbmcsIHNvdXJjZSBhbmQgdGFyZ2V0IGxhbmd1YWdlcywgcHJlcHJvY2Vzc2VzIHRoZSBpbnB1dCBkYXRhIGJhc2VkIG9uIHRoZSB0YXNrIHN0cmluZywgCiAgICAgICAgZ2VuZXJhdGVzIG91dHB1dCBiYXNlZCBvbiB0aGUgaW5wdXQgYW5kIGxhbmd1YWdlcywgYW5kIHJldHVybnMgdGhlIG91dHB1dC4gCiAgICAgICAgTG9ncyBpbnRlcm1lZGlhdGUgaW5mb3JtYXRpb24gZm9yIGRlYnVnZ2luZy4gCiAgICAgICAgUmFpc2VzIGVycm9ycyBmb3IgcHJvY2Vzc2luZyBhbmQgcHJlZGljdGlvbiBmYWlsdXJlcy4KCiAgICAgICAgQXJnczoKICAgICAgICAgICAgKiprd2FyZ3M6IEEgZGljdGlvbmFyeSBjb250YWluaW5nIGlucHV0IGRhdGEsIHRhc2sgc3RyaW5nLCBzb3VyY2UgbGFuZ3VhZ2UsIGFuZCB0YXJnZXQgbGFuZ3VhZ2UuCgogICAgICAgIFJldHVybnM6CiAgICAgICAgICAgIFR1cGxlW1VuaW9uW3N0ciwgTm9uZV0sIFVuaW9uW3RvcmNoLlRlbnNvciwgTm9uZV1dOiAKICAgICAgICAgICAgICAgIEEgdHVwbGUgY29udGFpbmluZyBlaXRoZXIgYSBzdHJpbmcgb3IgTm9uZSwgYW5kIGVpdGhlciBhIHRvcmNoLlRlbnNvciBvciBOb25lLCAKICAgICAgICAgICAgICAgIHJlcHJlc2VudGluZyB0aGUgcHJlZGljdGVkIG91dHB1dC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlucHV0X2RhdGEgPSBrd2FyZ3NbJ2lucHV0J10KICAgICAgICAgICAgdGFza19zdHIgPSBrd2FyZ3NbJ3Rhc2tfc3RyJ10KICAgICAgICAgICAgc3JjX2xhbmcgPSBrd2FyZ3NbJ3NyY19sYW5nJ10KICAgICAgICAgICAgdGd0X2xhbmcgPSBrd2FyZ3NbJ3RndF9sYW5nJ10KICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIHRhc2tfc3RyLnN0YXJ0c3dpdGgoJ3MyJyk6CiAgICAgICAgICAgICAgICBpbnB1dF9kYXRhID0gc2VsZi5fcHJvY2Vzc19hdWRpb19pbnB1dChpbnB1dF9kYXRhLCBzcmNfbGFuZykKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlucHV0X2RhdGEgPSBzZWxmLl9wcm9jZXNzX3RleHRfaW5wdXRzKGlucHV0X2RhdGEsIHNyY19sYW5nKQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZyhzdHIoaW5wdXRfZGF0YSlbOjMwXSkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKHR5cGUoaW5wdXRfZGF0YSkpCiAgICAgICAgICAgIGxvZ2dlci5kZWJ1Zyhrd2FyZ3MpCiAgICAgICAgICAgIG91dHB1dCA9IE5vbmUKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaWYgc2VsZi50YXNrX3N0cmluZy5lbmRzd2l0aCgic3BlZWNoIik6CiAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gc2VsZi5fZ2VuZXJhdGVfYXVkaW8oaW5wdXRfZGF0YSwgdGd0X2xhbmcpCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IHNlbGYuX2dlbmVyYXRlX3RleHQoaW5wdXRfZGF0YSwgdGd0X2xhbmcpCiAgICAgICAgICAgIGV4Y2VwdCBBdHRyaWJ1dGVFcnJvciBhcyBlOgogICAgICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyB0cmFuc2xhdGlvbjoge2V9IikKICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJFcnJvciBwcm9jZXNzaW5nIHRyYW5zbGF0aW9uOiB7ZX0iKSBmcm9tIGUKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKG91dHB1dCkKICAgICAgICAgICAgbG9nZ2VyLmRlYnVnKHR5cGUob3V0cHV0KSkKICAgICAgICAgICAgcmV0dXJuIG91dHB1dAogICAgICAgIAogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyB0cmFuc2xhdGlvbjoge2V9IikKICAgICAgICAgICAgcmFpc2UKICAgICAgICAKICAgIGRlZiBfcHJvY2Vzc19hdWRpb19vdXRwdXQoc2VsZiwgb3V0cHV0OiB0b3JjaC5UZW5zb3IpIC0+IHRvcmNoLlRlbnNvcjoKICAgICAgICAiIiIKICAgICAgICBQcm9jZXNzIHRoZSBhdWRpbyBvdXRwdXQgdGVuc29yIGFuZCByZXR1cm4gaXQgYXMgYSBieXRlcyBvYmplY3QuCgogICAgICAgIEFyZ3M6CiAgICAgICAgICAgIG91dHB1dCAodG9yY2guVGVuc29yKTogVGhlIGF1ZGlvIG91dHB1dCB0ZW5zb3IgdG8gYmUgcHJvY2Vzc2VkLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICB0b3JjaC5UZW5zb3I6IFRoZSBwcm9jZXNzZWQgYXVkaW8gb3V0cHV0IGFzIGEgYnl0ZXMgb2JqZWN0LgoKICAgICAgICBSYWlzZXM6CiAgICAgICAgICAgIFZhbHVlRXJyb3I6IElmIHRoZXJlIGlzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIGF1ZGlvIG91dHB1dC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGJ1ZmZlciA9IGlvLkJ5dGVzSU8oKQogICAgICAgICAgICB0b3JjaC5zYXZlKG91dHB1dCwgYnVmZmVyKQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICAgICAgbG9nZ2VyLmVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyBhdWRpbyBvdXRwdXQ6IHtlfSIpCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJFcnJvciBwcm9jZXNzaW5nIGF1ZGlvIG91dHB1dDoge2V9IikgZnJvbSBlCiAgICAgICAgcmV0dXJuIGJ1ZmZlci5nZXR2YWx1ZSgpCiAgICAKICAgIGRlZiBfcHJvY2Vzc19vdXRwdXQoc2VsZiwgb3V0cHV0OiBzdHIpIC0+IHN0cjoKICAgICAgICAiIiIKICAgICAgICBQcm9jZXNzIHRoZSBmaW5hbCBvdXRwdXQgdG8gZW5jb2RlIGl0IGluIGJhc2U2NCBhbmQgZGVjb2RlIGl0IHRvIHV0Zi04LgoKICAgICAgICBBcmdzOgogICAgICAgICAgICBvdXRwdXQgKHN0cik6IFRoZSBmaW5hbCBvdXRwdXQgdG8gYmUgcHJvY2Vzc2VkLgoKICAgICAgICBSZXR1cm5zOgogICAgICAgICAgICBzdHI6IFRoZSBwcm9jZXNzZWQgb3V0cHV0IGFmdGVyIGVuY29kaW5nIGFuZCBkZWNvZGluZy4KICAgICAgICBSYWlzZXM6CiAgICAgICAgICAgIFZhbHVlRXJyb3I6IElmIHRoZXJlIGlzIGFuIGVycm9yIHByb2Nlc3NpbmcgdGhlIGZpbmFsIG91dHB1dC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIG91dHB1dCA9IGJhc2U2NC5iNjRlbmNvZGUob3V0cHV0KS5kZWNvZGUoInV0Zi04IikKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIGxvZ2dlci5lcnJvcihmIkVycm9yIHByb2Nlc3NpbmcgZmluYWwgb3V0cHV0OiB7ZX0iKQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiRXJyb3IgcHJvY2Vzc2luZyBmaW5hbCBvdXRwdXQ6IHtlfSIpIGZyb20gZQogICAgICAgIHJldHVybiBvdXRwdXQKCiAgICAKZGVmIHRleHQydGV4dCh0cmFuc2xhdGlvbjogVHJhbnNsYXRpb24sIG1pbmVyX3JlcXVlc3Q6IE9wdGlvbmFsW1RyYW5zbGF0aW9uUmVxdWVzdF0gPSBOb25lKToKICAgICIiIgogICAgR2VuZXJhdGVzIGEgdHJhbnNsYXRpb24gb2YgdGhlIGlucHV0IHRleHQgZnJvbSBFbmdsaXNoIHRvIEZyZW5jaCB1c2luZyB0aGUgZ2l2ZW4gVHJhbnNsYXRpb24gb2JqZWN0LgoKICAgIEFyZ3M6CiAgICAgICAgdHJhbnNsYXRpb24gKFRyYW5zbGF0aW9uKTogVGhlIFRyYW5zbGF0aW9uIG9iamVjdCB1c2VkIHRvIGdlbmVyYXRlIHRoZSB0cmFuc2xhdGlvbi4KICAgICAgICBtaW5lcl9yZXF1ZXN0IChPcHRpb25hbFtUcmFuc2xhdGlvblJlcXVlc3RdLCBvcHRpb25hbCk6IFRoZSBvcHRpb25hbCBUcmFuc2xhdGlvblJlcXVlc3Qgb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBkYXRhIGZvciB0aGUgdHJhbnNsYXRpb24uIERlZmF1bHRzIHRvIE5vbmUuCgogICAgUmV0dXJuczoKICAgICAgICBzdHI6IFRoZSB0cmFuc2xhdGVkIHRleHQgZnJvbSBFbmdsaXNoIHRvIEZyZW5jaC4KCiAgICBFeGFtcGxlOgogICAgICAgID4+PiB0cmFuc2xhdGlvbiA9IFRyYW5zbGF0aW9uKCkKICAgICAgICA+Pj4gbWluZXJfcmVxdWVzdCA9IFRyYW5zbGF0aW9uUmVxdWVzdChkYXRhPXsiaW5wdXQiOiAiSGVsbG8sIG15IG5hbWUgaXMgSm9obiBEb2UuIiwgInRhc2tfc3RyaW5nIjogInRleHQydGV4dCIsICJzb3VyY2VfbGFuZ3VhZ2UiOiAiRW5nbGlzaCIsICJ0YXJnZXRfbGFuZ3VhZ2UiOiAiRnJlbmNoIn0pCiAgICAgICAgPj4+IHRleHQydGV4dCh0cmFuc2xhdGlvbiwgbWluZXJfcmVxdWVzdCkKICAgICAgICAnQm9uam91ciwgamUgbSdhcHBlbGxlIEpvaG4gRG9lLicKICAgICIiIgogICAgdHJhbnNsYXRpb25fcmVxdWVzdCA9IG1pbmVyX3JlcXVlc3Qgb3IgVHJhbnNsYXRpb25SZXF1ZXN0KAogICAgICAgIGRhdGE9eyJpbnB1dCI6ICJIZWxsbywgbXkgbmFtZSBpcyBKb2huIERvZS4iLCAidGFza19zdHJpbmciOiAidGV4dDJ0ZXh0IiwgInNvdXJjZV9sYW5ndWFnZSI6ICJFbmdsaXNoIiwgInRhcmdldF9sYW5ndWFnZSI6ICJGcmVuY2gifQogICAgKQogICAgcmV0dXJuIHRyYW5zbGF0aW9uLnByb2Nlc3ModHJhbnNsYXRpb25fcmVxdWVzdCkKCgpkZWYgdGV4dDJzcGVlY2godHJhbnNsYXRpb246IFRyYW5zbGF0aW9uLCBtaW5lcl9yZXF1ZXN0OiBPcHRpb25hbFtUcmFuc2xhdGlvblJlcXVlc3RdID0gTm9uZSk6CiAgICAiIiIKICAgIEdlbmVyYXRlcyBzcGVlY2ggZnJvbSB0ZXh0IHVzaW5nIHRoZSBnaXZlbiBUcmFuc2xhdGlvbiBvYmplY3QuCgogICAgQXJnczoKICAgICAgICB0cmFuc2xhdGlvbiAoVHJhbnNsYXRpb24pOiBUaGUgVHJhbnNsYXRpb24gb2JqZWN0IHVzZWQgdG8gZ2VuZXJhdGUgdGhlIHNwZWVjaC4KICAgICAgICBtaW5lcl9yZXF1ZXN0IChPcHRpb25hbFtUcmFuc2xhdGlvblJlcXVlc3RdLCBvcHRpb25hbCk6IFRoZSBvcHRpb25hbCBUcmFuc2xhdGlvblJlcXVlc3Qgb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBkYXRhIGZvciB0aGUgc3BlZWNoIGdlbmVyYXRpb24uIERlZmF1bHRzIHRvIE5vbmUuCgogICAgUmV0dXJuczoKICAgICAgICBVbmlvbltzdHIsIE5vbmVdOiBUaGUgZ2VuZXJhdGVkIHNwZWVjaCBhcyBhIHN0cmluZywgb3IgTm9uZSBpZiBhbiBlcnJvciBvY2N1cnJlZC4KICAgICIiIgogICAgdHJhbnNsYXRpb25fcmVxdWVzdCA9IG1pbmVyX3JlcXVlc3Qgb3IgVHJhbnNsYXRpb25SZXF1ZXN0KAogICAgICAgIGRhdGE9eyJpbnB1dCI6ICJIZWxsbywgbXkgbmFtZSBpcyBKb2huIERvZS4iLCAidGFza19zdHJpbmciOiAidGV4dDJzcGVlY2giLCAic291cmNlX2xhbmd1YWdlIjogIkVuZ2xpc2giLCAidGFyZ2V0X2xhbmd1YWdlIjogIkZyZW5jaCJ9CiAgICApCiAgICByZXR1cm4gdHJhbnNsYXRpb24ucHJvY2Vzcyh0cmFuc2xhdGlvbl9yZXF1ZXN0KQoKCmRlZiBzcGVlY2gydGV4dCh0cmFuc2xhdGlvbjogVHJhbnNsYXRpb24sIG1pbmVyX3JlcXVlc3Q6IE9wdGlvbmFsW1RyYW5zbGF0aW9uUmVxdWVzdF0gPSBOb25lKToKICAgICIiIgogICAgQSBmdW5jdGlvbiB0aGF0IGNvbnZlcnRzIHNwZWVjaCBpbnB1dCB0byB0ZXh0IHVzaW5nIGEgZ2l2ZW4gVHJhbnNsYXRpb24gb2JqZWN0LgogICAgCiAgICBBcmdzOgogICAgICAgIHRyYW5zbGF0aW9uIChUcmFuc2xhdGlvbik6IFRoZSBUcmFuc2xhdGlvbiBvYmplY3QgdXNlZCBmb3IgdGhlIGNvbnZlcnNpb24uCiAgICAgICAgbWluZXJfcmVxdWVzdCAoT3B0aW9uYWxbVHJhbnNsYXRpb25SZXF1ZXN0XSwgb3B0aW9uYWwpOiBBZGRpdGlvbmFsIGRhdGEgZm9yIHRoZSBjb252ZXJzaW9uLiBEZWZhdWx0cyB0byBOb25lLgogICAgICAgIAogICAgUmV0dXJuczoKICAgICAgICBUaGUgcHJvY2Vzc2VkIHRleHQgb3V0cHV0LgogICAgIiIiCiAgICB0cmFuc2xhdGlvbl9yZXF1ZXN0ID0gbWluZXJfcmVxdWVzdCBvciBUcmFuc2xhdGlvblJlcXVlc3QoCiAgICAgICAgZGF0YT17ImlucHV0IjogIm1vZHVsZXMvdHJhbnNsYXRpb24vaW4vYXVkaW9fcmVxdWVzdC53YXYiLCAidGFza19zdHJpbmciOiAic3BlZWNoMnRleHQiLCAic291cmNlX2xhbmd1YWdlIjogIkVuZ2xpc2giLCAidGFyZ2V0X2xhbmd1YWdlIjogIkZyZW5jaCJ9CiAgICApCiAgICByZXR1cm4gdHJhbnNsYXRpb24ucHJvY2Vzcyh0cmFuc2xhdGlvbl9yZXF1ZXN0KQoKCmRlZiBzcGVlY2gyc3BlZWNoKHRyYW5zbGF0aW9uOiBUcmFuc2xhdGlvbiwgbWluZXJfcmVxdWVzdDogT3B0aW9uYWxbVHJhbnNsYXRpb25SZXF1ZXN0XSA9IE5vbmUpOgogICAgIiIiCiAgICBDb252ZXJ0cyBzcGVlY2ggaW5wdXQgdG8gc3BlZWNoIG91dHB1dCB1c2luZyBhIGdpdmVuIFRyYW5zbGF0aW9uIG9iamVjdC4KICAgIAogICAgQXJnczoKICAgICAgICB0cmFuc2xhdGlvbiAoVHJhbnNsYXRpb24pOiBUaGUgVHJhbnNsYXRpb24gb2JqZWN0IHVzZWQgZm9yIHRoZSBjb252ZXJzaW9uLgogICAgICAgIG1pbmVyX3JlcXVlc3QgKE9wdGlvbmFsW1RyYW5zbGF0aW9uUmVxdWVzdF0sIG9wdGlvbmFsKTogQWRkaXRpb25hbCBkYXRhIGZvciB0aGUgY29udmVyc2lvbi4gRGVmYXVsdHMgdG8gTm9uZS4KICAgICAgICAKICAgIFJldHVybnM6CiAgICAgICAgVGhlIHByb2Nlc3NlZCBzcGVlY2ggb3V0cHV0LgogICAgIiIiCiAgICB0cmFuc2xhdGlvbl9yZXF1ZXN0ID0gbWluZXJfcmVxdWVzdCBvciBUcmFuc2xhdGlvblJlcXVlc3QoCiAgICAgICAgZGF0YT17ImlucHV0IjogIm1vZHVsZXMvdHJhbnNsYXRpb24vaW4vYXVkaW9fcmVxdWVzdC53YXYiLCAidGFza19zdHJpbmciOiAic3BlZWNoMnNwZWVjaCIsICJzb3VyY2VfbGFuZ3VhZ2UiOiAiRW5nbGlzaCIsICJ0YXJnZXRfbGFuZ3VhZ2UiOiAiRnJlbmNoIn0KICAgICkKICAgIHJldHVybiB0cmFuc2xhdGlvbi5wcm9jZXNzKHRyYW5zbGF0aW9uX3JlcXVlc3QpCiAgICAKCmlmIF9fbmFtZV9fID09ICJfX21haW5fXyI6CiAgICB0cmFuc2xhdGlvbiA9IFRyYW5zbGF0aW9uKFRyYW5zbGF0aW9uQ29uZmlnKCkpCiAgICByZXN1bHQgPSBzcGVlY2gydGV4dCh0cmFuc2xhdGlvbikKICAgIHByaW50KGYic3BlZWNoMnRleHQ6IHtyZXN1bHR9IikKICAgIHJlc3VsdCA9IHNwZWVjaDJzcGVlY2godHJhbnNsYXRpb24pCiAgICBwcmludChmInNwZWVjaDJzcGVlY2g6IHtyZXN1bHR9IikKICAgIHJlc3VsdCA9IHRleHQydGV4dCh0cmFuc2xhdGlvbikKICAgIHByaW50KGYidGV4dDJ0ZXh0OiB7cmVzdWx0fSIpCiAgICByZXN1bHQgPSB0ZXh0MnNwZWVjaCh0cmFuc2xhdGlvbikKICAgIHByaW50KGYidGV4dDJzcGVlY2g6IHtyZXN1bHR9IikKICAgICAgICAKICAgIA=='),
    ('install_translation.sh', 'IyEvYmluL2Jhc2gKCnNldCAtZQoKc291cmNlIC4vLnZlbnYvYmluL2FjdGl2YXRlCgpweXRob24gLW0gcGlwIGluc3RhbGwgLS11cGdyYWRlIHBpcAoKcGlwIGluc3RhbGwgc2V0dXB0b29scyB3aGVlbCBnbnVyZWFkbGluZQpwaXAgaW5zdGFsbCBzbmRmaWxlIGdnbWwtcHl0aG9uIHN1YnN0cmF0ZS1pbnRlcmZhY2UgYml0dGVuc29yIGxvZ3VydQpwaXAgaW5zdGFsbCBmYXN0YXBpIHV2aWNvcm4gbG9ndXJ1IHJlcXVlc3RzIHN1YnN0cmF0ZS1pbnRlcmZhY2Ugc2VudGVuY2VwaWVjZSBwcm90b2J1ZgoKaWYgY29tbWFuZCAtdiBhcHQtZ2V0ID4vZGV2L251bGw7IHRoZW4KICAgIHN1ZG8gYXB0LWdldCB1cGRhdGUgJiYgc3VkbyBhcHQtZ2V0IHVwZ3JhZGUgLXkKICAgIHN1ZG8gYXB0LWdldCBpbnN0YWxsIHB5dGhvbjMgcHl0aG9uMy1kZXYgcHl0aG9uMy12ZW52IHB5dGhvbjMtcGlwIHB5dGhvbi1pcy1weXRob24zIGxpYnNuZGZpbGUxLWRldiBsaWJnbXAxMC1kZXYgLXkKZWxpZiBjb21tYW5kIC12IHBhY21hbiA+L2Rldi9udWxsOyB0aGVuCiAgICBzdWRvIHBhY21hbiAtU3l1IC0tbm9jb25maXJtCiAgICBzdWRvIHBhY21hbiAtUyBweXRob24gcHl0aG9uLXBpcCBweXRob24tdmlydHVhbGVudiBsaWJzbmRmaWxlIGdtcCAtLW5vY29uZmlybQplbHNlCiAgICBlY2hvICJUaGlzIHNjcmlwdCByZXF1aXJlcyBhIExpbnV4IGRpc3RyaWJ1dGlvbiB3aXRoIGVpdGhlciBhcHQgb3IgcGFjbWFuLiIKICAgIGV4aXQgMQpmaQoKaWYgWyAhIC1kICIuL21vZHVsZXMvdHJhbnNsYXRpb24vc2VhbWxlc3MiIF07IHRoZW4KICAgIGdpdCBjbG9uZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2tyZXNlYXJjaC9zZWFtbGVzc19jb21tdW5pY2F0aW9uLmdpdCAuL21vZHVsZXMvdHJhbnNsYXRpb24vc2VhbWxlc3MKICAgIApmaQpwaXAgaW5zdGFsbCAuL21vZHVsZXMvdHJhbnNsYXRpb24vc2VhbWxlc3MKcGlwIGluc3RhbGwgZ2l0K2h0dHBzOi8vZ2l0aHViLmNvbS9odWdnaW5nZmFjZS90cmFuc2Zvcm1lcnMgdG9yY2ggdG9yY2hhdWRpbyB0b3JjaHZpc2lvbiBmYWlyc2VxMgoKbWtkaXIgLXAgLi9tb2R1bGVzL3RyYW5zbGF0aW9uL2luCgpta2RpciAtcCAuL21vZHVsZXMvdHJhbnNsYXRpb24vb3V0Cg=='),
]

for relative_path, encoded_content in file_data:
    full_path = os.path.join(folder_path, relative_path)
    os.makedirs(os.path.dirname(full_path), exist_ok=True)
    with open(full_path, 'wb') as f:
        f.write(base64.b64decode(encoded_content))
    print(f'Created: {full_path}')
command = ['bash', 'modules/translation/install_translation.sh']
subprocess.run(command, check=True)
